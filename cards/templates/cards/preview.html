{% extends 'cards/base.html' %}
{% load static %}

{% block title %}Preview - {{ build.cpu }} - –ü–ê–†–¢–ú–ê–†–¢{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto">
    <div class="flex justify-between items-center mb-8">
        <h1 class="text-4xl font-bold bg-gradient-to-r from-red-500 to-orange-500 bg-clip-text text-transparent">
            üëÅ Preview —Å–±–æ—Ä–∫–∏
        </h1>
        <a href="{% url 'cards:index' %}" class="steam-button-secondary">
            ‚Üê –ù–∞–∑–∞–¥
        </a>
    </div>
    
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–±–æ—Ä–∫–µ -->
        <div class="glass-panel p-8 rounded-2xl">
            <h2 class="text-2xl font-bold mb-6">üíª –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–±–æ—Ä–∫–µ</h2>
            
            <!-- –§–æ—Ç–æ -->
            {% if build.photo %}
            <div class="mb-6">
                <img src="{{ build.photo.url }}" alt="PC" class="w-full h-64 object-cover rounded-xl">
            </div>
            {% endif %}
            
            <!-- –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ -->
            <div class="space-y-4">
                {% for label, value in build.get_specs_list %}
                <div class="glass-card p-4 rounded-xl">
                    <div class="text-sm text-gray-400 mb-1">{{ label }}</div>
                    <div class="font-bold">{{ value }}</div>
                </div>
                {% endfor %}
            </div>
            
            <!-- –¶–µ–Ω–∞ -->
            <div class="glass-card p-6 rounded-xl mt-6 text-center">
                <div class="text-sm text-gray-400 mb-2">üí∞ –¶–µ–Ω–∞</div>
                <div class="text-4xl font-bold text-red-500">{{ build.price }} ‚ÇΩ</div>
            </div>
            
            <!-- –ë–æ–Ω—É—Å—ã -->
            {% if build.bonuses %}
            <div class="glass-card p-4 rounded-xl mt-4">
                <div class="text-sm text-gray-400 mb-2">üéÅ –ë–æ–Ω—É—Å—ã</div>
                <div class="text-sm whitespace-pre-line">{{ build.bonuses }}</div>
            </div>
            {% endif %}
            
            <!-- –°—Ç–∏–ª—å -->
            <div class="glass-card p-4 rounded-xl mt-4 text-center">
                <div class="text-sm text-gray-400 mb-2">üé® –°—Ç–∏–ª—å –∫–∞—Ä—Ç–æ—á–∫–∏</div>
                <div class="text-2xl font-bold">{{ build.get_style_display }}</div>
            </div>
        </div>
        
        <!-- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ preview -->
        <div class="glass-panel p-8 rounded-2xl">
            <h2 class="text-2xl font-bold mb-6">‚ú® –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏</h2>
            
            {% if build.generated_card %}
                <!-- –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ -->
                <div class="mb-6">
                    <img src="{{ build.generated_card.url }}" alt="Generated Card" class="w-full rounded-xl border-2 border-red-500 shadow-xl shadow-red-500/20">
                </div>
                
                <div class="space-y-4">
                    <a href="{% url 'cards:download' build.pk %}" class="block steam-button text-center">
                        üíæ –°–∫–∞—á–∞—Ç—å PNG (1200x1200)
                    </a>
                    
                    <a href="{% url 'cards:generate' build.pk %}" class="block steam-button-secondary text-center">
                        üîÑ –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å
                    </a>
                </div>
            {% else %}
                <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –µ—â—ë –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞ -->
                <div class="glass-card p-12 rounded-xl text-center mb-6">
                    <div class="text-6xl mb-4">üî®</div>
                    <p class="text-xl text-gray-400 mb-4">–ö–∞—Ä—Ç–æ—á–∫–∞ –µ—â—ë –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞</p>
                    <p class="text-sm text-gray-500">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</p>
                </div>
                
                <a href="{% url 'cards:generate' build.pk %}" class="block steam-button text-center text-xl py-4">
                    ‚ú® –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É
                </a>
            {% endif %}
            
            <!-- –ò–Ω—Ñ–æ -->
            <div class="glass-card p-4 rounded-xl mt-6">
                <p class="text-sm text-gray-400">
                    üí° <strong>–°–æ–≤–µ—Ç:</strong> –ö–∞—Ä—Ç–æ—á–∫–∞ –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ 1200x1200px,
                    –∏–¥–µ–∞–ª—å–Ω–æ–º –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –ê–≤–∏—Ç–æ.
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
